</div>
<!-- Guestbook Floating Button and Form -->
<button id="guestbook-btn" style="position:fixed;bottom:32px;right:32px;z-index:1000;background:#1976d2;color:#fff;border:none;border-radius:50%;width:56px;height:56px;box-shadow:0 2px 12px rgba(0,0,0,0.18);font-size:2rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background 0.3s;">
    ðŸ’¬
</button>
<div id="guestbook-modal" style="display:none;position:fixed;bottom:100px;right:32px;z-index:1001;background:#fff;padding:24px 20px 16px 20px;border-radius:16px;box-shadow:0 4px 32px rgba(0,0,0,0.18);width:320px;max-width:90vw;">
    <form id="guestbook-form" autocomplete="off">
        <div style="font-weight:bold;font-size:1.2rem;margin-bottom:8px;">Guestbook</div>
        <input id="guestbook-name" type="text" maxlength="32" placeholder="Your name" style="width:100%;margin-bottom:8px;padding:8px 10px;border-radius:6px;border:1px solid #bbb;font-size:1rem;" required />
                <div style="position:relative;display:flex;align-items:center;margin-bottom:8px;">
                    <textarea id="guestbook-message" maxlength="200" placeholder="Your message (max 200 chars)" style="width:100%;padding:8px 10px;border-radius:6px;border:1px solid #bbb;font-size:1rem;resize:none;" required></textarea>
                    <button type="button" id="emoji-picker-btn" style="margin-left:6px;font-size:1.3rem;background:transparent;border:none;cursor:pointer;" title="Add emoji">ðŸ˜Š</button>
                </div>
                <div style="margin-bottom:8px;">
            <label id="guestbook-captcha-label" for="guestbook-captcha"></label>
            <input id="guestbook-captcha" type="text" maxlength="3" style="width:32px;text-align:center;" required />
        </div>
        <button type="submit" style="background:#1976d2;color:#fff;border:none;border-radius:6px;padding:8px 18px;font-size:1rem;cursor:pointer;">Sign</button>
        <button type="button" id="guestbook-cancel" style="background:transparent;color:#1976d2;border:none;padding:8px 10px;font-size:1rem;cursor:pointer;float:right;">Cancel</button>
        <div id="guestbook-error" style="color:#d32f2f;font-size:0.95rem;margin-top:8px;display:none;"></div>
    </form>
</div>
<div id="guestbook-toast-container" style="position:fixed;bottom:16px;left:16px;z-index:1002;display:flex;flex-direction:column;gap:10px;"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, limit, onSnapshot } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyCg-lyuk3TlmWgfud9aFWXSArlY80StIDI",
    authDomain: "website-guestbook-cfbab.firebaseapp.com",
    projectId: "website-guestbook-cfbab",
    storageBucket: "website-guestbook-cfbab.firebasestorage.app",
    messagingSenderId: "172090640385",
    appId: "1:172090640385:web:e164764a65c786144f1800"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// --- Guestbook UI logic ---
const btn = document.getElementById('guestbook-btn');
const modal = document.getElementById('guestbook-modal');
const form = document.getElementById('guestbook-form');
const cancel = document.getElementById('guestbook-cancel');

const errorDiv = document.getElementById('guestbook-error');
const toastContainer = document.getElementById('guestbook-toast-container');
const captchaLabel = document.getElementById('guestbook-captcha-label');
const captchaInput = document.getElementById('guestbook-captcha');

// Captcha logic
let captchaAnswer = '';
function randomizeCaptcha() {
    // Simple math captcha
    const a = Math.floor(Math.random() * 10) + 1;
    const b = Math.floor(Math.random() * 10) + 1;
    captchaAnswer = (a + b).toString();
    captchaLabel.textContent = `What is ${a} + ${b}? `;
    captchaInput.value = '';
}

btn.onclick = () => {
    modal.style.display = 'block';
    errorDiv.style.display = 'none';
    randomizeCaptcha();
};
cancel.onclick = () => { modal.style.display = 'none'; };

// --- Bad link and profanity filter ---
const BAD_DOMAINS = [
  'phishing.com', 'malware.com', 'badsite.net', 'scamdomain.org', 'abuse.ch', 'openphish.com', 'phishtank.com'
];
const PROFANITIES = [
  'Africoon', 'Africoon-Americoon', 'Africoonia', 'Americoon', 'Americunt', 'AmeriKKKunt', 'antifaggot', 'antinigger', 'Ashke-Nazi', 'assfuck', 'assjockey', 'asslicker', 'asswhore', 'beaner', 'Chankoro', 'Chink', 'Choc-ice', 'clamdigger', 'coon', 'Coon-ass', 'cumqueen', 'cunnilingus', 'cunteyed', 'cuntfucker', 'cuntlicker', 'datnigga', 'dicklicker','Dothead', 'fag', 'fagot', 'fatfuck', 'Gypsy', 'hobo', 'homobangers', 'Hymie', 'Indognesial', 'Indonesial', 'Jigaboo', 'jigga', 'jiggabo', 'jigger', 'kunt', 'kyk', 'Laowai', 'Leb', 'molester', 'Munt', 'nigger', 'niggerhole', 'niggers', 'niggles', 'niggling', 'nlgger', 'nlggor', 'Porch-monkey', 'porchmonkey', 'prostitute', 'Redskin', 'retard', 'sexslave', 'sextogo', 'Sheboon', 'shitnigger', 'slanteye', 'slavedriver', 'slut', 'sluts', 'slutt', 'sniggers', 'snownigger', 'spaghettinigge', 'Spearchucker', 'Timber-nigger', 'White-trash', 'whitetrash', 'Wigger', 'Wuhan-virus', 'Yuon', 'zigabo'
  // I didn't type these out I swear ;-;
];

function filterMessage(msg) {
    // Only block links from known bad domains, allow safe links
    let filtered = msg.replace(/https?:\/\/\S+/gi, function(link) {
        try {
            const url = new URL(link);
            if (BAD_DOMAINS.some(domain => url.hostname.includes(domain))) {
                return '[blocked malicious link]';
            }
        } catch (e) {}
        return link; // allow safe link
    });
    filtered = filtered.replace(/www\.[^\s]+/gi, function(link) {
        try {
            const hostname = link.split('/')[0].replace('www.', '');
            if (BAD_DOMAINS.some(domain => hostname.includes(domain))) {
                return '[blocked malicious link]';
            }
        } catch (e) {}
        return link; // allow safe link
    });
    // Profanity filter (replace with asterisks)
    PROFANITIES.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        filtered = filtered.replace(regex, '*'.repeat(word.length));
    });
    return filtered;
}

function containsBadLink(msg) {
    // Check for http(s) and www links
    const urlRegex = /https?:\/\/[^\s]+|www\.[^\s]+/gi;
    const links = msg.match(urlRegex) || [];
    for (const link of links) {
        try {
            let hostname = '';
            if (link.startsWith('http')) {
                hostname = new URL(link).hostname;
            } else if (link.startsWith('www.')) {
                hostname = link.split('/')[0].replace('www.', '');
            }
            if (BAD_DOMAINS.some(domain => hostname.includes(domain))) {
                return true;
            }
        } catch (e) {}
    }
    return false;
}

function containsProfanity(msg) {
    for (const word of PROFANITIES) {
        const regex = new RegExp(`\\b${word}\\b`, 'i');
        if (regex.test(msg)) {
            return true;
        }
    }
    return false;
}

form.onsubmit = async (e) => {
    e.preventDefault();
    errorDiv.style.display = 'none';
    // Check if this browser has already submitted
    if (localStorage.getItem('guestbook_submitted') === 'yes') {
        errorDiv.textContent = 'You have already signed the guestbook from this browser!';
        errorDiv.style.display = 'block';
        return;
    }
    const name = form['guestbook-name'].value.trim();
    let message = form['guestbook-message'].value.trim();
    const captcha = captchaInput.value.trim();
    if (captcha !== captchaAnswer) {
        errorDiv.textContent = 'Captcha incorrect!';
        errorDiv.style.display = 'block';
        randomizeCaptcha();
        return;
    }
    if (!name || !message) {
        errorDiv.textContent = 'Please fill in all fields.';
        errorDiv.style.display = 'block';
        return;
    }
    if (containsBadLink(message) || containsProfanity(message)) {
        errorDiv.textContent = "Please don't post bad stuff in here!";
        errorDiv.style.display = 'block';
        return;
    }
    message = filterMessage(message);
    try {
        await addDoc(collection(db, 'guestbook'), {
            name,
            message,
            created: serverTimestamp()
        });
        localStorage.setItem('guestbook_submitted', 'yes');
        modal.style.display = 'none';
        form.reset();
    } catch (err) {
        errorDiv.textContent = 'Error saving message.';
        errorDiv.style.display = 'block';
    }
};

// --- Guestbook message display logic ---
let guestbookMessages = [];
let currentStart = 0;

const maxVisible = 3;
const cycleInterval = 4000;
let cycleTimer = null;

function getLoopedMessages(start, count, arr) {
    const result = [];
    for (let i = 0; i < count; i++) {
        result.push(arr[(start + i) % arr.length]);
    }
    return result;
}

function renderGuestbookToasts() {
    // Clear container before adding new toasts
    toastContainer.innerHTML = '';
    if (guestbookMessages.length === 0) return;
    const visible = getLoopedMessages(currentStart, Math.min(maxVisible, guestbookMessages.length), guestbookMessages);
    visible.forEach((msg, idx) => {
        const toast = document.createElement('div');
        toast.className = 'guestbook-toast';
        toast.style.background = '#fff';
        toast.style.color = '#1976d2';
        toast.style.borderRadius = '10px';
        toast.style.boxShadow = '0 2px 12px rgba(0,0,0,0.10)';
        toast.style.padding = '12px 18px';
        toast.style.fontSize = '1rem';
        toast.style.maxWidth = '320px';
        toast.style.minWidth = '40px';
        toast.style.display = 'inline-block';
        toast.style.wordBreak = 'break-word';
        toast.style.width = 'fit-content';
        toast.style.margin = '0 0 0 0';
        toast.style.opacity = '0';
        toast.innerHTML = `<b>${msg.name}</b>: ${msg.message}`;
        toast.style.transform = 'translateY(30px)';
        toastContainer.appendChild(toast);
        // Trigger entry transition
        setTimeout(() => {
            toast.style.opacity = (idx === 0 && visible.length === maxVisible) ? '0.5' : '0.97';
            toast.style.transform = 'translateY(0)';
        }, 10);
    });
}

function startGuestbookCycle() {
    if (cycleTimer) clearInterval(cycleTimer);
    if (guestbookMessages.length > 1) {
        cycleTimer = setInterval(() => {
            currentStart = (currentStart + 1) % guestbookMessages.length;
            renderGuestbookToasts();
        }, cycleInterval);
    }
}

const q = query(collection(db, 'guestbook'), orderBy('created', 'desc'), limit(10));
onSnapshot(q, (snapshot) => {
    guestbookMessages = [];
    snapshot.forEach(doc => {
        const data = doc.data();
        if (data.name && data.message) {
            guestbookMessages.push({ name: data.name, message: data.message });
        }
    });
    guestbookMessages.reverse(); // oldest first, newest last
    currentStart = 0;
    renderGuestbookToasts();
    startGuestbookCycle();
});
</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Valerie's Hideout</title>
    <meta property="og:title" content="Valerie's Hideout" />
    <meta property="og:description" content="Welcome to my little corner of the internet!" />
    <!-- <meta property="og:image" content="images/og-image.png" /> -->
    <meta property="og:url" content="https://itsonlyvalerie.github.io/" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Valerie's Hideout" />
    <meta name="twitter:description" content="Welcome to my little corner of the internet!" />
    <!-- <meta name="twitter:image" content="images/og-image.png" /> -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <a href="https://github.com/ItsOnlyValerie" target="_blank" rel="noopener" id="github-btn" style="position: absolute; top: 20px; right: 100px; z-index: 101; padding: 14px 18px; border-radius: 12px; border: none; background: transparent; color: #fff; font-weight: bold; cursor: pointer; box-shadow: none; outline: none; display: flex; align-items: center; justify-content: center; font-size: 2rem; width: 56px; height: 56px; transition: background 0.3s, color 0.3s; text-decoration: none;">
            <svg height="32" width="32" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" style="display:block;"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
        </a>
        <button id="toggle-mode" style="position: absolute; top: 20px; right: 20px; z-index: 100; padding: 18px 22px; border-radius: 12px; border: none; background: transparent; color: #111; font-weight: bold; cursor: pointer; box-shadow: none; outline: none; display: flex; align-items: center; justify-content: center; font-size: 2.2rem; width: 64px; height: 64px; transition: background 0.3s, color 0.3s;">
            <span id="toggle-icon" aria-hidden="true"></span>
        </button>
    <h1 style="margin-bottom: 0;">Valerie</h1>
    <div id="typewriter-line" style="text-align:center;font-size:1.3rem;color:#1565c0;margin-bottom:24px;min-height:2.2em;"><span id="typewriter-symbol">âœ¦</span> <span id="typewriter-text"></span><span id="typewriter-cursor">|</span></div>
<script>
// --- Typewriter effect for cycling experience ---
const experiences = ["game developer", "artist", "cat lover", "web tinkerer", "music enjoyer"];
const typewriterText = document.getElementById('typewriter-text');
const typewriterCursor = document.getElementById('typewriter-cursor');
const typewriterSymbol = document.getElementById('typewriter-symbol');
let expIdx = 0;
let charIdx = 0;
let typing = true;

function typeExperience() {
    const current = experiences[expIdx];
    if (typing) {
        if (charIdx < current.length) {
            typewriterText.textContent = current.slice(0, charIdx + 1);
            charIdx++;
            setTimeout(typeExperience, 70);
        } else {
            typing = false;
            setTimeout(typeExperience, 1200);
        }
    } else {
        if (charIdx > 0) {
            charIdx--;
            typewriterText.textContent = current.slice(0, charIdx);
            setTimeout(typeExperience, 30);
        } else {
            typing = true;
            expIdx = (expIdx + 1) % experiences.length;
            setTimeout(typeExperience, 400);
        }
    }
}
if(typewriterText && typewriterCursor && typewriterSymbol) typeExperience();
// Blinking cursor
setInterval(() => {
    if(typewriterCursor) typewriterCursor.style.opacity = typewriterCursor.style.opacity === '0' ? '1' : '0';
}, 500);
</script>
        <div class="blog-box">
            <div class="blog-title">My First Blog Post</div>
            <div class="blog-date">October 7, 2025</div>
            <div class="blog-content">Welcome to the website! This is where I will be posting my blogs showcasing what I've been working on. Hope you enjoy your stay!</div>
            <!--
            Example for a new blog post (remember to put this above the existing posts):
            <div class="blog-title">Your New Blog Title</div>
            <div class="blog-date">Month Day, Year</div>
            <div class="blog-content">Your new blog content goes here.</div>
            -->
        </div>
        <div class="wave">
            <svg id="background-wave-svg" width="100vw" height="560" viewBox="0 0 1440 560" xmlns="http://www.w3.org/2000/svg" style="display:block; position:absolute; left:0; bottom:0; z-index:1; width:100vw; margin:0; padding:0;" preserveAspectRatio="none">
                <path id="background-wave-path" fill="#4fc3f7" d=""/>
            </svg>
            <svg id="animated-wave-svg" width="100vw" height="480" viewBox="0 0 1440 480" xmlns="http://www.w3.org/2000/svg" style="display:block; position:absolute; left:0; bottom:0; z-index:2; width:100vw; margin:0; padding:0;" preserveAspectRatio="none">
                <path id="animated-wave-path" fill="#39a0ed" d="M 0 80 L 480 80 L 960 80 L 1440 80 L 1440 160 L 0 160 Z"/>
            </svg>
        </div>
</body>
<script src="wave.js"></script>

<script>

const btn = document.getElementById('toggle-mode');
const icon = document.getElementById('toggle-icon');
const body = document.body;
let dark = false;

const moonSVG = `<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28 25.5C25.5 27.5 22.5 29 19 29C12.3726 29 7 23.6274 7 17C7 12.5 9.5 8.5 13 6.5C12.5 7.5 12 9 12 11C12 18.1797 18.8203 25 26 25C26.75 25 27.5 25.25 28 25.5Z" fill="#111"/></svg>`;
const sunSVG = `<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="18" cy="18" r="8" fill="#fff"/><g stroke="#fff" stroke-width="2"><line x1="18" y1="2" x2="18" y2="7"/><line x1="18" y1="29" x2="18" y2="34"/><line x1="2" y1="18" x2="7" y2="18"/><line x1="29" y1="18" x2="34" y2="18"/><line x1="6.22" y1="6.22" x2="9.9" y2="9.9"/><line x1="26.1" y1="26.1" x2="29.78" y2="29.78"/><line x1="6.22" y1="29.78" x2="9.9" y2="26.1"/><line x1="26.1" y1="9.9" x2="29.78" y2="6.22"/></g></svg>`;

function updateToggleIcon() {
        if (dark) {
            icon.innerHTML = sunSVG;
            btn.style.background = 'transparent';
            btn.style.color = '#fff';
        } else {
            icon.innerHTML = moonSVG;
            btn.style.background = 'transparent';
            btn.style.color = '#111';
        }
}

btn.addEventListener('click', () => {
        dark = !dark;
        if (dark) {
                body.classList.add('dark-mode');
        } else {
                body.classList.remove('dark-mode');
        }
        updateToggleIcon();
});

// Auto-switch mode based on local time (dark: 7pm-7am, light: 7am-7pm)
function autoSetModeByTime() {
    const hour = new Date().getHours();
    const shouldBeDark = (hour >= 19 || hour < 7);
    if (shouldBeDark !== dark) {
        dark = shouldBeDark;
        if (dark) {
            body.classList.add('dark-mode');
        } else {
            body.classList.remove('dark-mode');
        }
        updateToggleIcon();
    }
}

autoSetModeByTime();
updateToggleIcon();
</script>
<script>
// --- Emoji Picker ---
const emojiBtn = document.getElementById('emoji-picker-btn');
const messageBox = document.getElementById('guestbook-message');
const emojiList = ["ðŸ˜€","ðŸ˜","ðŸ˜‚","ðŸ¤£","ðŸ˜Š","ðŸ˜","ðŸ˜Ž","ðŸ˜¢","ðŸ˜­","ðŸ˜¡","ðŸ‘","ðŸ‘","ðŸ™","ðŸŽ‰","â¤ï¸","ðŸ”¥","âœ¨","ðŸŒˆ","ðŸ€","ðŸ•","ðŸ±","ðŸ¶","ðŸŒ¸","â­","ðŸ¥º"];
let emojiPickerDiv = null;

if (emojiBtn && messageBox) {
  emojiBtn.onclick = function(e) {
    e.preventDefault();
    if (emojiPickerDiv) {
      emojiPickerDiv.remove();
      emojiPickerDiv = null;
      return;
    }
    emojiPickerDiv = document.createElement('div');
    emojiPickerDiv.style.position = 'absolute';
    emojiPickerDiv.style.bottom = '40px';
    emojiPickerDiv.style.right = '0';
    emojiPickerDiv.style.background = '#fff';
    emojiPickerDiv.style.border = '1px solid #bbb';
    emojiPickerDiv.style.borderRadius = '8px';
    emojiPickerDiv.style.boxShadow = '0 2px 12px rgba(0,0,0,0.10)';
    emojiPickerDiv.style.padding = '6px 8px';
    emojiPickerDiv.style.display = 'flex';
    emojiPickerDiv.style.flexWrap = 'wrap';
    emojiPickerDiv.style.gap = '6px';
    emojiPickerDiv.style.zIndex = '2000';
    emojiList.forEach(emoji => {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.textContent = emoji;
      btn.style.fontSize = '1.2rem';
      btn.style.background = 'transparent';
      btn.style.border = 'none';
      btn.style.cursor = 'pointer';
      btn.onclick = function() {
        // Insert emoji at cursor position
        const start = messageBox.selectionStart;
        const end = messageBox.selectionEnd;
        const text = messageBox.value;
        messageBox.value = text.slice(0, start) + emoji + text.slice(end);
        messageBox.focus();
        messageBox.selectionStart = messageBox.selectionEnd = start + emoji.length;
        emojiPickerDiv.remove();
        emojiPickerDiv = null;
      };
      emojiPickerDiv.appendChild(btn);
    });
    emojiBtn.parentElement.style.position = 'relative';
    emojiBtn.parentElement.appendChild(emojiPickerDiv);
  };
}
// Hide emoji picker if clicked outside
window.addEventListener('mousedown', function(e) {
  if (emojiPickerDiv && !emojiPickerDiv.contains(e.target) && e.target !== emojiBtn) {
    emojiPickerDiv.remove();
    emojiPickerDiv = null;
  }
});
</script>
</html>